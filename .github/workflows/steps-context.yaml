name: Steps Context POC

on:
  push:
  workflow_dispatch:

jobs:
  job1:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v4
      - name: set up node
        uses: actions/setup-node@v4
      - name: install
        run:  npm ci     

      - name: create out1
        id: out1
        run: echo 'out1="Hello, world!"' >> $GITHUB_OUTPUT

      - name: create out2
        id: out2
        run: echo 'out2="where am i"' >> $GITHUB_OUTPUT

      - name: load ts action
        id: extractor
        uses: ./
        with:
          stepdata: ${{ toJSON(steps) }}

      - name: print ts action output
        id: printts
        run: echo "${{ toJSON(steps.extractor.outputs.finaloutput) }}"
